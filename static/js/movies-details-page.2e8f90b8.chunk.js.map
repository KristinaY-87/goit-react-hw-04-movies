{"version":3,"sources":["views/MovieDetailsPage/MovieDetailsPage.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/Cast/default.jpg","components/Cast/Cast.js","components/Reviews/Reviews.js","views/MovieDetailsPage/MovieDetailsPage.js","apiServices.js"],"names":["module","exports","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","Cast","state","baseUrl","casts","id","this","props","Api","fetchCast","then","response","setState","map","name","profile_path","character","src","defaultImg","alt","width","Component","Reviews","reviews","fetchMoviesReview","content","author","url","slice","href","rel","MoviesDetailsPage","genres","title","overview","vote_average","poster_path","castList","handleGoBack","location","history","from","routes","home","movieId","match","params","fetchMoviesDetails","console","log","type","onClick","className","styles","block","wrapper","list","item","to","pathname","path","render","KEY","fetchPopularMovies","axios","get","r","data","results","fetchMoviesSearchQuery","query","cast"],"mappings":"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","file":"static/js/movies-details-page.2e8f90b8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"MovieDetailsPage_block__1qnWq\",\"wrapper\":\"MovieDetailsPage_wrapper__2kUhl\",\"list\":\"MovieDetailsPage_list__3Dr3Y\"};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default __webpack_public_path__ + \"static/media/default.2e01288c.jpg\";","import { Component } from 'react';\nimport Api from '../../apiServices';\nimport defaultImg from './default.jpg';\n\nclass Cast extends Component {\n  state = {\n    baseUrl: 'https://image.tmdb.org/t/p/w500',\n    casts: [],\n  };\n\n  componentDidMount() {\n    const { id } = this.props;\n    Api.fetchCast(id).then(response =>\n      this.setState({\n        casts: response,\n      }),\n    );\n  }\n\n  render() {\n    const { casts, baseUrl } = this.state;\n\n    return (\n      <ul>\n        {casts.map(({ id, name, profile_path, character }) => (\n          <li key={id}>\n            {\n              <img\n                src={profile_path ? baseUrl + profile_path : defaultImg}\n                alt={name}\n                width=\"150\"\n              />\n            }\n            <p>{name}</p>\n            <p>Character: {character}</p>\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default Cast;\n","// import axios from \"axios\";\nimport { Component } from 'react';\nimport Api from '../../apiServices';\n// const KEY = '2690a15d8abf52b4f7c30542acc1f92f';\n\nclass Reviews extends Component {\n  state = {\n    reviews: [],\n  };\n\n  // async componentDidMount() {\n  //     console.log(this.props);\n  //     const { id } = this.props;\n\n  //     const response = await axios.get(`https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${KEY}`)\n  //     console.log(response.data.results)\n  //     console.log(...response.data.results)\n\n  //     this.setState({\n  //         reviews: response.data.results\n  //     })\n  // }\n\n  componentDidMount() {\n    const { id } = this.props;\n    Api.fetchMoviesReview(id).then(response =>\n      this.setState({\n        reviews: response,\n      }),\n    );\n  }\n\n  render() {\n    const { reviews } = this.state;\n    return (\n      <ul>\n        {reviews && reviews.length > 0\n          ? reviews.map(({ id, content, author, url }) => (\n              <li key={id}>\n                <h3>Author: {author}</h3>\n                <p>{content.slice(0, 500)}</p>\n                <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  ReadMore\n                </a>\n              </li>\n            ))\n          : 'No information'}\n      </ul>\n    );\n  }\n}\n\nexport default Reviews;\n","// import axios from \"axios\";\nimport { Component } from 'react';\nimport { Route, NavLink } from 'react-router-dom';\nimport Cast from '../../components/Cast';\nimport Reviews from '../../components/Reviews';\nimport routes from '../../routes';\nimport Api from '../../apiServices';\nimport styles from './MovieDetailsPage.module.css';\n\n// const KEY = '2690a15d8abf52b4f7c30542acc1f92f';\n\nclass MoviesDetailsPage extends Component {\n  state = {\n    baseUrl: 'https://image.tmdb.org/t/p/w500/',\n    genres: null,\n    id: null,\n    title: null,\n    overview: null,\n    vote_average: null,\n    poster_path: '',\n    castList: null,\n    reviews: null,\n  };\n\n  componentDidMount() {\n    const { movieId } = this.props.match.params;\n    Api.fetchMoviesDetails(movieId).then(response =>\n      // const response = await axios.get(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${KEY}`)\n      //   console.log(response.poster_path)\n\n      this.setState({\n        ...response,\n        poster_path: `https://image.tmdb.org/t/p/w500${response.poster_path}`,\n      }),\n    );\n  }\n\n  handleGoBack = () => {\n    const { location, history } = this.props;\n    // // 1 вариант старый\n    // if (location.state && location.state.from) {\n    //   return history.push(location.state.from);\n    // }\n    // history.push(routes.home);\n\n    // 2 вариант\n    history.push(location?.state?.from || routes.home);\n  };\n\n  render() {\n    const { title, poster_path, overview, vote_average, genres } = this.state;\n    const { match } = this.props;\n    // const movieId = Number(this.props.match.params);\n    const movieId = match.params.movieId;\n    console.log('history', this.props.history);\n    console.log('location', this.props.location);\n\n    return (\n      <>\n        <button type=\"button\" onClick={this.handleGoBack}>\n          Go back\n        </button>\n\n        <div className={styles.block}>\n          <img src={poster_path} alt={title} width=\"300\"></img>\n\n          <div className={styles.wrapper}>\n            <h2>{title}</h2>\n            <p>User score: {vote_average}%</p>\n            <h3>Overview</h3>\n            <p>{overview}</p>\n            <ul className={styles.list}>\n              <h4>Genres</h4>\n              {genres?.map(({ id, name }) => (\n                <li className={styles.item} key={id + name}>\n                  {name}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <div>\n          <p>Information</p>\n          <ul>\n            <NavLink\n              to={{\n                pathname: `${match.url}/cast`,\n                state: this.props.location.state,\n              }}\n            >\n              <li>Cast</li>\n            </NavLink>\n            <NavLink\n              to={{\n                pathname: `${match.url}/reviews`,\n                state: this.props.location.state,\n              }}\n            >\n              {/* {reviews.length > 0 (We don't have any reviews for this movie. */}\n              <li>Reviews</li>\n            </NavLink>\n          </ul>\n\n          <Route\n            path={`${match.path}/cast`}\n            render={() => <Cast id={movieId} />}\n          />\n          <Route\n            path={`${match.path}/reviews`}\n            render={() => <Reviews id={movieId} />}\n          />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default MoviesDetailsPage;\n","import axios from 'axios';\n\nconst KEY = '2690a15d8abf52b4f7c30542acc1f92f';\nconst Api = {\n  fetchPopularMovies() {\n    return axios\n      .get(`https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}`)\n      .then(r => r.data.results);\n  },\n  fetchMoviesSearchQuery(query) {\n    return axios\n      .get(\n        `https://api.themoviedb.org/3/search/movie?query=${query}&api_key=${KEY}&language=en-US&page=1&include_adult=false`,\n      )\n      .then(response => response.data.results);\n  },\n  fetchMoviesDetails(movieId) {\n    return axios\n      .get(\n        `https://api.themoviedb.org/3/movie/${movieId}?api_key=${KEY}&language=en-US`,\n      )\n      .then(response => response.data);\n  },\n  fetchCast(id) {\n    return axios\n      .get(\n        `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${KEY}&language=en-US`,\n      )\n      .then(response => response.data.cast);\n  },\n  fetchMoviesReview(id) {\n    return axios\n      .get(\n        `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${KEY}&language=en-US&page=1`,\n      )\n      .then(response => response.data.results);\n  },\n};\n\nexport default Api;\n"],"sourceRoot":""}